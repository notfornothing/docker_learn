# Docker å‘½ä»¤è¯¦è§£ï¼šæœ¬åœ° vs è¿œç¨‹

## ğŸ“‹ ç›®å½•

- [æ ¸å¿ƒåŒºåˆ«](#æ ¸å¿ƒåŒºåˆ«)
- [docker manifest inspect - è¿œç¨‹æŸ¥è¯¢](#docker-manifest-inspect---è¿œç¨‹æŸ¥è¯¢)
- [docker image inspect - æœ¬åœ°æŸ¥è¯¢](#docker-image-inspect---æœ¬åœ°æŸ¥è¯¢)
- [Docker å‘½ä»¤çš„è§„å¾‹](#docker-å‘½ä»¤çš„è§„å¾‹)
- [å…¶ä»–ç›¸å…³å‘½ä»¤å¯¹æ¯”](#å…¶ä»–ç›¸å…³å‘½ä»¤å¯¹æ¯”)
- [å®é™…æµ‹è¯•ç¤ºä¾‹](#å®é™…æµ‹è¯•ç¤ºä¾‹)

---

## ğŸ¯ æ ¸å¿ƒåŒºåˆ«

### ä¸€å¥è¯æ€»ç»“

- **`docker manifest inspect`** = æŸ¥è¯¢è¿œç¨‹ä»“åº“ï¼ˆRegistryï¼‰
- **`docker image inspect`** = æŸ¥è¯¢æœ¬åœ°é•œåƒï¼ˆLocalï¼‰

---

## ğŸ” docker manifest inspect - è¿œç¨‹æŸ¥è¯¢

### å·¥ä½œåŸç†

```bash
docker manifest inspect é•œåƒå:æ ‡ç­¾
```

**è¡Œä¸ºï¼š**
1. âœ… **ä¼šå»è¿œç¨‹ä»“åº“æŸ¥è¯¢**ï¼ˆDocker Hubã€ç§æœ‰ä»“åº“ç­‰ï¼‰
2. âœ… **ä¸éœ€è¦æœ¬åœ°æœ‰é•œåƒ**ï¼ˆå³ä½¿æ²¡æ‹‰å–è¿‡ä¹Ÿèƒ½æŸ¥è¯¢ï¼‰
3. âœ… **æŸ¥è¯¢çš„æ˜¯ Manifest Listï¼ˆå¤šæ¶æ„ä¿¡æ¯ï¼‰**
4. âœ… **è¿”å›è¿œç¨‹ä»“åº“çš„ä¿¡æ¯**

**ç¤ºä¾‹ï¼š**
```bash
# å³ä½¿æœ¬åœ°æ²¡æœ‰è¿™ä¸ªé•œåƒï¼Œä¹Ÿèƒ½æŸ¥è¯¢
docker manifest inspect nacos/nacos-server:v1.4.8-slim

# è¾“å‡ºï¼šè¿œç¨‹ä»“åº“çš„ Manifest List ä¿¡æ¯
# åŒ…æ‹¬æ‰€æœ‰æ”¯æŒçš„æ¶æ„ã€Digest ç­‰
```

**é€‚ç”¨åœºæ™¯ï¼š**
- æŸ¥çœ‹è¿œç¨‹é•œåƒæ”¯æŒå“ªäº›æ¶æ„
- æŸ¥çœ‹è¿œç¨‹é•œåƒçš„ Digest
- æ£€æŸ¥é•œåƒæ˜¯å¦å­˜åœ¨
- æŸ¥çœ‹å¤šæ¶æ„é•œåƒä¿¡æ¯

---

## ğŸ“¦ docker image inspect - æœ¬åœ°æŸ¥è¯¢

### å·¥ä½œåŸç†

```bash
docker image inspect é•œåƒå:æ ‡ç­¾
```

**è¡Œä¸ºï¼š**
1. âœ… **åªæŸ¥è¯¢æœ¬åœ°é•œåƒ**ï¼ˆå¿…é¡»å·²ç»æ‹‰å–åˆ°æœ¬åœ°ï¼‰
2. âŒ **ä¸ä¼šå»è¿œç¨‹ä»“åº“**ï¼ˆå³ä½¿æœ¬åœ°æ²¡æœ‰ä¹Ÿä¸ä¼šå»æ‹‰å–ï¼‰
3. âœ… **æŸ¥è¯¢çš„æ˜¯æœ¬åœ°é•œåƒçš„è¯¦ç»†ä¿¡æ¯**
4. âœ… **è¿”å›æœ¬åœ°é•œåƒçš„é…ç½®ã€å±‚ã€æ¶æ„ç­‰ä¿¡æ¯**

**ç¤ºä¾‹ï¼š**
```bash
# å¿…é¡»å…ˆæ‹‰å–é•œåƒ
docker pull hello-world

# ç„¶åæ‰èƒ½ inspect
docker image inspect hello-world

# å¦‚æœæœ¬åœ°æ²¡æœ‰ï¼Œä¼šæŠ¥é”™ï¼š
# Error: No such image: hello-world
```

**é€‚ç”¨åœºæ™¯ï¼š**
- æŸ¥çœ‹æœ¬åœ°é•œåƒçš„è¯¦ç»†ä¿¡æ¯
- æŸ¥çœ‹é•œåƒçš„é…ç½®ï¼ˆç¯å¢ƒå˜é‡ã€å…¥å£ç‚¹ç­‰ï¼‰
- æŸ¥çœ‹é•œåƒçš„å±‚ä¿¡æ¯
- æŸ¥çœ‹é•œåƒçš„æ¶æ„ï¼ˆArchitectureï¼‰

---

## ğŸ“š Docker å‘½ä»¤çš„è§„å¾‹

### è§„å¾‹æ€»ç»“

Docker å‘½ä»¤éµå¾ªä¸€ä¸ªåŸºæœ¬è§„å¾‹ï¼š

| å‘½ä»¤ç±»å‹ | æ“ä½œå¯¹è±¡ | æ˜¯å¦éœ€è¦æœ¬åœ°é•œåƒ | æ˜¯å¦è®¿é—®è¿œç¨‹ |
|---------|---------|----------------|-------------|
| `docker image *` | æœ¬åœ°é•œåƒ | âœ… å¿…é¡» | âŒ ä¸è®¿é—® |
| `docker manifest *` | è¿œç¨‹ä»“åº“ | âŒ ä¸éœ€è¦ | âœ… è®¿é—® |
| `docker pull` | è¿œç¨‹â†’æœ¬åœ° | âŒ ä¸éœ€è¦ | âœ… è®¿é—® |
| `docker push` | æœ¬åœ°â†’è¿œç¨‹ | âœ… å¿…é¡» | âœ… è®¿é—® |
| `docker images` | æœ¬åœ°é•œåƒåˆ—è¡¨ | - | âŒ ä¸è®¿é—® |
| `docker search` | è¿œç¨‹ä»“åº“æœç´¢ | âŒ ä¸éœ€è¦ | âœ… è®¿é—® |

---

### è¯¦ç»†åˆ†ç±»

#### 1. æœ¬åœ°æ“ä½œå‘½ä»¤ï¼ˆä¸è®¿é—®è¿œç¨‹ï¼‰

è¿™äº›å‘½ä»¤åªæ“ä½œæœ¬åœ° Docker ç¯å¢ƒï¼š

```bash
# é•œåƒç›¸å…³
docker images              # åˆ—å‡ºæœ¬åœ°é•œåƒ
docker image ls            # åˆ—å‡ºæœ¬åœ°é•œåƒ
docker image inspect       # æŸ¥çœ‹æœ¬åœ°é•œåƒè¯¦æƒ…
docker image rm            # åˆ é™¤æœ¬åœ°é•œåƒ
docker image tag           # ç»™æœ¬åœ°é•œåƒæ‰“æ ‡ç­¾
docker image history       # æŸ¥çœ‹æœ¬åœ°é•œåƒå†å²

# å®¹å™¨ç›¸å…³
docker ps                  # åˆ—å‡ºè¿è¡Œä¸­çš„å®¹å™¨
docker ps -a               # åˆ—å‡ºæ‰€æœ‰å®¹å™¨ï¼ˆåŒ…æ‹¬åœæ­¢çš„ï¼‰
docker inspect             # æŸ¥çœ‹å®¹å™¨è¯¦æƒ…ï¼ˆæœ¬åœ°ï¼‰
docker logs                # æŸ¥çœ‹å®¹å™¨æ—¥å¿—ï¼ˆæœ¬åœ°ï¼‰

# å…¶ä»–
docker volume ls           # åˆ—å‡ºæœ¬åœ°å·
docker network ls          # åˆ—å‡ºæœ¬åœ°ç½‘ç»œ
```

**ç‰¹ç‚¹ï¼š**
- âœ… ä¸éœ€è¦ç½‘ç»œè¿æ¥
- âœ… æ“ä½œé€Ÿåº¦å¿«
- âŒ åªèƒ½çœ‹åˆ°æœ¬åœ°æœ‰çš„å†…å®¹

---

#### 2. è¿œç¨‹æ“ä½œå‘½ä»¤ï¼ˆè®¿é—®è¿œç¨‹ä»“åº“ï¼‰

è¿™äº›å‘½ä»¤ä¼šè®¿é—® Docker Registryï¼ˆå¦‚ Docker Hubï¼‰ï¼š

```bash
# æ‹‰å–å’Œæ¨é€
docker pull                # ä»è¿œç¨‹æ‹‰å–é•œåƒ
docker push                # æ¨é€é•œåƒåˆ°è¿œç¨‹

# æŸ¥è¯¢è¿œç¨‹ä¿¡æ¯
docker manifest inspect    # æŸ¥è¯¢è¿œç¨‹ Manifest
docker search              # æœç´¢è¿œç¨‹é•œåƒ
docker buildx imagetools   # æŸ¥è¯¢è¿œç¨‹é•œåƒå·¥å…·

# ç™»å½•è®¤è¯
docker login               # ç™»å½•è¿œç¨‹ä»“åº“
docker logout              # ç™»å‡ºè¿œç¨‹ä»“åº“
```

**ç‰¹ç‚¹ï¼š**
- âœ… å¯ä»¥æŸ¥è¯¢è¿œç¨‹ä¿¡æ¯
- âœ… ä¸éœ€è¦æœ¬åœ°æœ‰é•œåƒ
- âŒ éœ€è¦ç½‘ç»œè¿æ¥
- âŒ å¯èƒ½éœ€è¦è®¤è¯

---

#### 3. æ··åˆæ“ä½œå‘½ä»¤

è¿™äº›å‘½ä»¤å¯èƒ½æ¶‰åŠæœ¬åœ°å’Œè¿œç¨‹ï¼š

```bash
# æ„å»ºï¼ˆå¯èƒ½ä»è¿œç¨‹æ‹‰å–åŸºç¡€é•œåƒï¼‰
docker build               # æ„å»ºé•œåƒï¼ˆå¯èƒ½éœ€è¦ pull base imageï¼‰

# Composeï¼ˆå¯èƒ½ä»è¿œç¨‹æ‹‰å–é•œåƒï¼‰
docker compose up          # å¯åŠ¨æœåŠ¡ï¼ˆå¯èƒ½éœ€è¦ pull imagesï¼‰
```

---

## ğŸ”„ å…¶ä»–ç›¸å…³å‘½ä»¤å¯¹æ¯”

### docker images vs docker search

```bash
# docker images - æœ¬åœ°é•œåƒåˆ—è¡¨
docker images
# åªæ˜¾ç¤ºæœ¬åœ°å·²æ‹‰å–çš„é•œåƒ
# ä¸è®¿é—®è¿œç¨‹

# docker search - è¿œç¨‹æœç´¢
docker search nginx
# æœç´¢è¿œç¨‹ä»“åº“çš„é•œåƒ
# éœ€è¦è®¿é—®è¿œç¨‹
```

---

### docker inspectï¼ˆé€šç”¨ï¼‰vs docker image inspect

```bash
# docker inspect - é€šç”¨å‘½ä»¤
docker inspect å®¹å™¨å/é•œåƒå/å·å/ç½‘ç»œå
# å¯ä»¥ inspect ä»»ä½• Docker å¯¹è±¡
# ä½†éƒ½æ˜¯æŸ¥è¯¢æœ¬åœ°çš„

# docker image inspect - é•œåƒä¸“ç”¨
docker image inspect é•œåƒå
# ä¸“é—¨ç”¨äºé•œåƒ
# ä¹Ÿæ˜¯æŸ¥è¯¢æœ¬åœ°çš„
```

**æ³¨æ„ï¼š** `docker inspect` å’Œ `docker image inspect` éƒ½æ˜¯æŸ¥è¯¢æœ¬åœ°ï¼Œåªæ˜¯ `docker inspect` æ›´é€šç”¨ã€‚

---

### docker pull vs docker manifest inspect

```bash
# docker pull - æ‹‰å–é•œåƒåˆ°æœ¬åœ°
docker pull nginx:latest
# 1. è®¿é—®è¿œç¨‹ä»“åº“
# 2. ä¸‹è½½é•œåƒåˆ°æœ¬åœ°
# 3. æœ¬åœ°å°±æœ‰äº†é•œåƒ

# docker manifest inspect - åªæŸ¥è¯¢ï¼Œä¸ä¸‹è½½
docker manifest inspect nginx:latest
# 1. è®¿é—®è¿œç¨‹ä»“åº“
# 2. åªæŸ¥è¯¢ä¿¡æ¯
# 3. ä¸ä¸‹è½½é•œåƒï¼ˆæœ¬åœ°è¿˜æ˜¯æ²¡æœ‰ï¼‰
```

---

## ğŸ’¡ å®é™…æµ‹è¯•ç¤ºä¾‹

### æµ‹è¯• 1ï¼šmanifest inspectï¼ˆè¿œç¨‹æŸ¥è¯¢ï¼‰

```bash
# æµ‹è¯•ï¼šæŸ¥è¯¢è¿œç¨‹é•œåƒï¼ˆæœ¬åœ°æ²¡æœ‰ï¼‰
docker manifest inspect hello-world:latest

# ç»“æœï¼š
# âœ… æˆåŠŸè¿”å›è¿œç¨‹ä¿¡æ¯
# âœ… æ˜¾ç¤º Manifest List
# âœ… æœ¬åœ°ä»ç„¶æ²¡æœ‰ hello-world é•œåƒ
```

---

### æµ‹è¯• 2ï¼šimage inspectï¼ˆæœ¬åœ°æŸ¥è¯¢ï¼‰

```bash
# æµ‹è¯•1ï¼šæŸ¥è¯¢æœ¬åœ°é•œåƒï¼ˆå·²æ‹‰å–ï¼‰
docker pull hello-world
docker image inspect hello-world

# ç»“æœï¼š
# âœ… æˆåŠŸè¿”å›æœ¬åœ°é•œåƒä¿¡æ¯
# âœ… æ˜¾ç¤ºé•œåƒé…ç½®ã€å±‚ã€æ¶æ„ç­‰

# æµ‹è¯•2ï¼šæŸ¥è¯¢æœ¬åœ°ä¸å­˜åœ¨çš„é•œåƒ
docker image inspect nonexistent:latest

# ç»“æœï¼š
# âŒ Error: No such image: nonexistent:latest
# âŒ ä¸ä¼šå»è¿œç¨‹æ‹‰å–
```

---

### æµ‹è¯• 3ï¼šå¯¹æ¯”è¾“å‡º

```bash
# è¿œç¨‹æŸ¥è¯¢ï¼ˆmanifest inspectï¼‰
docker manifest inspect nginx:latest
# è¾“å‡ºï¼šManifest Listï¼ˆå¤šæ¶æ„ä¿¡æ¯ï¼‰
# {
#   "schemaVersion": 2,
#   "mediaType": "application/vnd.docker.distribution.manifest.list.v2+json",
#   "manifests": [
#     {
#       "platform": { "architecture": "amd64", "os": "linux" },
#       "digest": "sha256:..."
#     }
#   ]
# }

# æœ¬åœ°æŸ¥è¯¢ï¼ˆimage inspectï¼‰
docker pull nginx:latest
docker image inspect nginx:latest
# è¾“å‡ºï¼šæœ¬åœ°é•œåƒè¯¦ç»†ä¿¡æ¯
# {
#   "Id": "sha256:...",
#   "Architecture": "amd64",
#   "Os": "linux",
#   "Config": { ... },
#   "RootFS": { ... }
# }
```

---

## ğŸ“Š å‘½ä»¤å¯¹æ¯”è¡¨

| å‘½ä»¤ | æ“ä½œå¯¹è±¡ | éœ€è¦æœ¬åœ°é•œåƒ | è®¿é—®è¿œç¨‹ | ä¸»è¦ç”¨é€” |
|------|---------|------------|---------|---------|
| `docker manifest inspect` | è¿œç¨‹ Manifest | âŒ ä¸éœ€è¦ | âœ… æ˜¯ | æŸ¥çœ‹è¿œç¨‹é•œåƒæ¶æ„ã€Digest |
| `docker image inspect` | æœ¬åœ°é•œåƒ | âœ… å¿…é¡» | âŒ å¦ | æŸ¥çœ‹æœ¬åœ°é•œåƒè¯¦æƒ… |
| `docker images` | æœ¬åœ°é•œåƒåˆ—è¡¨ | - | âŒ å¦ | åˆ—å‡ºæœ¬åœ°é•œåƒ |
| `docker search` | è¿œç¨‹ä»“åº“ | âŒ ä¸éœ€è¦ | âœ… æ˜¯ | æœç´¢è¿œç¨‹é•œåƒ |
| `docker pull` | è¿œç¨‹â†’æœ¬åœ° | âŒ ä¸éœ€è¦ | âœ… æ˜¯ | æ‹‰å–é•œåƒåˆ°æœ¬åœ° |
| `docker inspect` | æœ¬åœ°å¯¹è±¡ | âœ… å¿…é¡» | âŒ å¦ | æŸ¥çœ‹æœ¬åœ°å¯¹è±¡è¯¦æƒ… |

---

## ğŸ“ è®°å¿†æŠ€å·§

### å‘½åè§„å¾‹

1. **`image` å¼€å¤´çš„å‘½ä»¤** = æ“ä½œæœ¬åœ°é•œåƒ
   - `docker image inspect` - æœ¬åœ°
   - `docker image ls` - æœ¬åœ°
   - `docker image rm` - æœ¬åœ°

2. **`manifest` å¼€å¤´çš„å‘½ä»¤** = æ“ä½œè¿œç¨‹ Manifest
   - `docker manifest inspect` - è¿œç¨‹
   - `docker manifest create` - è¿œç¨‹

3. **`pull/push`** = è¿œç¨‹æ“ä½œ
   - `docker pull` - ä»è¿œç¨‹æ‹‰å–
   - `docker push` - æ¨é€åˆ°è¿œç¨‹

4. **ä¸å¸¦å‰ç¼€çš„é€šç”¨å‘½ä»¤** = é€šå¸¸æ“ä½œæœ¬åœ°
   - `docker inspect` - æœ¬åœ°
   - `docker images` - æœ¬åœ°
   - `docker ps` - æœ¬åœ°

---

## â“ å¸¸è§é—®é¢˜

### Q: ä¸ºä»€ä¹ˆ `docker image inspect` ä¸å…ˆå»è¿œç¨‹æ‹‰å–ï¼Ÿ

**A:** è¿™æ˜¯è®¾è®¡å†³å®šï¼š
- `inspect` æ˜¯æŸ¥è¯¢å‘½ä»¤ï¼Œä¸æ˜¯æ‹‰å–å‘½ä»¤
- å¦‚æœè‡ªåŠ¨æ‹‰å–ï¼Œå¯èƒ½ä¼šæ„å¤–ä¸‹è½½å¤§é‡æ•°æ®
- æ˜ç¡®åˆ†ç¦»ï¼š`pull` è´Ÿè´£æ‹‰å–ï¼Œ`inspect` è´Ÿè´£æŸ¥è¯¢

---

### Q: `docker manifest inspect` ä¼šç¼“å­˜å—ï¼Ÿ

**A:** 
- å¯èƒ½ä¼šç¼“å­˜ Manifest ä¿¡æ¯ï¼ˆå–å†³äº Docker é…ç½®ï¼‰
- ä½†ä¸»è¦ç›®çš„æ˜¯æŸ¥è¯¢è¿œç¨‹æœ€æ–°ä¿¡æ¯
- å¦‚æœéœ€è¦æœ€æ–°ä¿¡æ¯ï¼Œå»ºè®®ç›´æ¥æŸ¥è¯¢

---

### Q: å¦‚ä½•æŸ¥çœ‹æœ¬åœ°é•œåƒçš„ Manifestï¼Ÿ

**A:** 
```bash
# æœ¬åœ°é•œåƒæ²¡æœ‰ Manifest Listï¼ˆé‚£æ˜¯è¿œç¨‹çš„æ¦‚å¿µï¼‰
# ä½†å¯ä»¥æŸ¥çœ‹æœ¬åœ°é•œåƒçš„è¯¦ç»†ä¿¡æ¯
docker image inspect é•œåƒå

# æˆ–è€…æŸ¥çœ‹é•œåƒçš„ Digest
docker images --digests
```

---

### Q: `docker inspect` å’Œ `docker image inspect` æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ

**A:** 
- `docker inspect` - é€šç”¨å‘½ä»¤ï¼Œå¯ä»¥ inspect å®¹å™¨ã€é•œåƒã€å·ã€ç½‘ç»œç­‰
- `docker image inspect` - ä¸“é—¨ç”¨äºé•œåƒï¼ŒåŠŸèƒ½ç›¸åŒä½†æ›´æ˜ç¡®

**ç¤ºä¾‹ï¼š**
```bash
# è¿™ä¸¤ä¸ªå‘½ä»¤æ•ˆæœç›¸åŒï¼ˆå¯¹äºé•œåƒï¼‰
docker inspect nginx:latest
docker image inspect nginx:latest

# ä½† docker inspect è¿˜å¯ä»¥ inspect å…¶ä»–å¯¹è±¡
docker inspect å®¹å™¨å    # inspect å®¹å™¨
docker inspect å·å      # inspect å·
docker inspect ç½‘ç»œå    # inspect ç½‘ç»œ
```

---

### Q: å¦‚ä½•çŸ¥é“ä¸€ä¸ªå‘½ä»¤æ˜¯æŸ¥è¯¢æœ¬åœ°è¿˜æ˜¯è¿œç¨‹ï¼Ÿ

**A:** åˆ¤æ–­æ–¹æ³•ï¼š

1. **çœ‹å‘½ä»¤åç§°**
   - `image` å¼€å¤´ â†’ æœ¬åœ°
   - `manifest` å¼€å¤´ â†’ è¿œç¨‹
   - `pull/push` â†’ è¿œç¨‹

2. **çœ‹æ˜¯å¦éœ€è¦æœ¬åœ°æœ‰å¯¹è±¡**
   - éœ€è¦æœ¬åœ°æœ‰ â†’ æœ¬åœ°æ“ä½œ
   - ä¸éœ€è¦æœ¬åœ°æœ‰ â†’ å¯èƒ½æ˜¯è¿œç¨‹æ“ä½œ

3. **å®é™…æµ‹è¯•**
   ```bash
   # æµ‹è¯•ï¼šæœ¬åœ°æ²¡æœ‰é•œåƒæ—¶æ‰§è¡Œå‘½ä»¤
   # å¦‚æœæŠ¥é”™ "No such image" â†’ æœ¬åœ°æ“ä½œ
   # å¦‚æœè¿”å›ä¿¡æ¯ â†’ è¿œç¨‹æ“ä½œ
   ```

---

## ğŸ“ æ€»ç»“

### æ ¸å¿ƒè§„å¾‹

1. **`docker image *`** = æ“ä½œæœ¬åœ°é•œåƒï¼Œä¸è®¿é—®è¿œç¨‹
2. **`docker manifest *`** = æ“ä½œè¿œç¨‹ Manifestï¼Œéœ€è¦è®¿é—®è¿œç¨‹
3. **`docker pull/push`** = è¿œç¨‹æ“ä½œ
4. **`docker inspect`** = æœ¬åœ°æ“ä½œï¼ˆæŸ¥è¯¢æœ¬åœ°å¯¹è±¡ï¼‰

### å¿«é€Ÿåˆ¤æ–­

- **éœ€è¦ç½‘ç»œ** â†’ è¿œç¨‹æ“ä½œ
- **ä¸éœ€è¦æœ¬åœ°æœ‰å¯¹è±¡** â†’ è¿œç¨‹æ“ä½œ
- **æŠ¥é”™ "No such ..."** â†’ æœ¬åœ°æ“ä½œ

---

**æœ€åæ›´æ–°**: 2025-12-10
